{{>layouts/header_admin}}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>도서등록페이지</title>
    <style>
        /* 왼쪽 메뉴창 부분 */
        body {
          background-color: white;
        }

        a {
          text-decoration: none;
        }

        #control_container {
          position: absolute;
          top: 450px;
          left: 600px;
        }

        /* 왼쪽 메뉴창 부분 */
        a {
          color: black;
        }

        #control_2 {
          position: absolute;
          top: 50px;
        }


        #control_2_p {

          width: 160px;
          height: 120px;
          border-bottom: 1px solid rgb(189, 189, 189);
          background-color: #e90fc5;
          text-align: center;
        }

        #control_2_p p {
          font-size: 20px;
          color: white;
        }

        .control_2_1 {
          width: 160px;
          height: 40px;
          border-bottom: 1px solid #e90fc5;
          padding: 20px 0 0 0;
        }



        /*  메인 부분 */

        .Resiter_container {
          position: absolute;
          top: 50px;
          left: 250px;
          color: #3b398f;
        }

        .page_title {
          width: 240px;
          height: 50px;
          background-color: rgb(72, 199, 21);
          color: white;
          border-radius: 10px;
        }

        .page_title span {
          position: absolute;
          top: 10px;
          font-size: 20px;
        }

        /* 등록 하기 */

        .Resiter_img {
          width: 200px;
          height: 300px;
          border-radius: 10px;
        }


        #Resiter_title {
          width: 400px;
        }

        #Resiter_writer {
          width: 400px;
        }

        #Resiter_publiser {
          width: 400px;
        }

        .Resiter_btn {
          width: 240px;
          height: 50px;
          background-color: rgb(255, 0, 242);
          color: white;
          border-radius: 10px;
          border: 0;
          font-size: 20px;
        }

        .back_a {
          width: 180PX;
          height: 50px;
          border: 0;
          text-align: center;
          background-color: blue;
          border-radius: 10px;
        }

        .back_a p {
          font-size: 20px;
          color: white;
          padding: 10px;
        }

        .next_btn4 {
          width: 180px;
          height: 30px;
          background-color: rgb(0, 0, 0);
          border-radius: 10px;
          border: 0;
          font-size: 15px;
          color: rgb(244, 239, 239);
        }


        /* 사진 업로드 */
        /* 앞표지 이미지 */
        li {
          list-style: none;
        }

        img {
          width: 160px;
          height: 200px;
        }


        .Resiter_img_view {
          width: 160px;
          height: 200px;
          background-color: rgb(243, 240, 236);
          display: flex;
          gap: 20px;
        }
    </style>
</head>

<body>
<div id="control_container">
    <!-- 왼쪽 메뉴 부분 -->
    <div id="control_1">
        <a href="#">홈</a> >
        <a href="/admin/AllBooks">관리자페이지</a> >
        <a href="/admin/AllBooks">상품관리</a> >
        <a href="#">도서 등록하기</a>
    </div>


    <div id="control_2">
        <div id="control_2_p">
            <br>
            <p>관리자페이지</p>
        </div>
        <div class="control_2_1">
            <a href="/admin/AllBooks">상품관리</a>
        </div>
        <div class="control_2_1">
            <a href="/AllMembers">회원관리</a>
        </div>
        <div class="control_2_1">
            <a href="#">리뷰관리</a>
        </div>
        <div class="control_2_1">
            <a href="#">일대일문의관리</a>
        </div>
        <div class="control_2_1">
            <a href="#">질문및답변관리</a>
        </div>
    </div>


    <!-- 메인부분 -->
    <form class="Resiter_container" action="/admin/create" method="post">
        <div class="page_title">
            <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;도서 등록하기</span>
        </div>
        <br>
        <br>

        <div class="next_btn">

            <a href="/admin/AllBooks">
                <button type="button" class="next_btn4">도서 목록보기</button>
            </a>
        </div>
        <br>
        <br>

        <div>
            <h3><label for="book_id">책번호</label>
                <input type="text" id="book_id" name="book_id" required>
            </h3>
        </div>
        <br>

        <div class="Resiter_img">
            <!-- 사진업로드 -->
            <!-- input태그에서 type을 file로 하면  파일업로드 가능하고
                    accept를 image/*로 하면 이미지 업로드만 가능하다-->
            <h3>사진 업로드</h3>
            <input type="file" class="Resiter_img_input" accept="image/*" required multiple name="book_image">
            <div class="Resiter_img_upload"></div>
            <ul class="Resiter_img_view"></ul>
        </div>
        <br>

        <div>
            <h3><label for="Resiter_title">제목</label>
                <input type="text" id="Resiter_title" name="book_title" required>
            </h3>
        </div>
        <br>
        <div>
            <h3><label for="Resiter_writer">저자</label>
                <input type="text" id="Resiter_writer_writer" name="book_author" required>
            </h3>
        </div>
        <br>
        <div>
            <h3><label for="book_publisher">출판사</label>
                <input type="text" id="book_publisher" name="publisher" required>
            </h3>
        </div>
        <br>
        <div>
            <h3><label for="pub_date">출판일</label>
                <input type="date" id="pub_date" name="pub_date" required>
            </h3>
        </div>
        <br>
        <div>
            <h3>도서 주제</h3>
            <select onchange="categoryChange(this)" name="major_kategory">
                <option value="대분류">대분류</option>
                <option value="소설">소설</option>
                <option value="문학">문학/인물</option>
                <option value="철학">철학/심리교육</option>
                <option value="자기계발">자기계발</option>
                <option value="경영">경영/경제</option>
                <option value="만화">만화</option>
                <option value="종교">종교</option>
                <option value="취미">취미</option>
                <option value="잡지">잡지</option>
                <option value="역사">역사/문화</option>
                <option value="가정">가정/건강</option>
                <option value="사회">사회/정치/법/과학</option>
                <option value="전문서적">전문서적</option>
                <option value="외국어">외국어</option>
                <option value="외국도서">외국도서/원서</option>
                <option value="유아">유아</option>
                <option value="아동">아동/초등</option>
                <option value="청소년">청소년</option>
                <option value="대학생">대학생</option>
                <option value="취업">취업/자격증/시험</option>
                <option value="영화음반">영화/음반</option>
                <option value="사전">사전/전집</option>
                <option value="컴퓨터">컴퓨터</option>
                <option value="고서">고서/희귀본</option>
                <option value="기타">기타</option>
            </select>

            <select id="good" name="minor_kategory">
                <option>소분류</option>
            </select>
        </div>
        <br>


        <div>
            <h3><label for="pub_price">정가</label>
                <input type="text" id="pub_price" name="list_price" required><span>원</span>
            </h3>
        </div>
        <br>

        <div>
            <h3><label for="sell_price">판매가격</label>
                <input type="text" id="sell_price" name="sell_price" required><span>원</span>
            </h3>
        </div>
        <br>
        <div>
            <h3><label for="book_grade">책 등급</label>
                <select id="book_grade" name="book_condition" required>
                    <option value="최상급">최상급</option>
                    <option value="상급">상급</option>
                    <option value="중급">중급</option>
                    <option value="하급">하급</option>
                </select>
            </h3>
            <button class="book_detail_s_btn"><a href="..//project1/p1_needs_info_book_grade.html">책 상태 설명
                참고(등급기준)</a></button>
        </div>
        <br>

        <div>
            <h3>책 상태설명</h3>
            <textarea cols="100" rows="10" name="book_detail" required></textarea>
        </div>

        <br>

        <div>
            <h3>책 내용</h3>
            <textarea cols="100" rows="30" name="book_infor" required></textarea>
        </div>




        <br>

        <div>
            <h3><label for="purchase_price">매입 가격</label>
                <input type="text" id="purchase_price" name="purchase_price" required><span>원</span>
            </h3>
        </div>
        <br>


        <br>
        <div>
            <a href="redirect:">
                <button type="submit" class="Resiter_btn">등록하기</button>
            </a>
        </div>
        <br>
        <div class="next_btn">
            <a href="/admin/AllBooks">
                <button type="button" class="next_btn4">도서 목록보기</button>
            </a>
        </div>
        <div>
            <br>
            <br>
        </div>
    </form>
</div>


<script>
    function getImageFiles(e) {
      const uploadFiles = [];
      const files = e.currentTarget.files;
      const imagePreview = document.querySelector('.Resiter_img_view');
      const docFrag = new DocumentFragment();

      if ([...files].length >= 7) {
        alert('이미지는 한번에 6개만 업로드가 가능합니다. 가급적 각 사항마다 하나만 올려주세요.');
        return;
      }

      // 파일 타입 검사
      [...files].forEach(file => {
        if (!file.type.match("image/.*")) {
          alert('이미지 파일만 업로드가 가능합니다.');
          return
        }

        // 파일 갯수 검사
        if ([...files].length < 7) {
          uploadFiles.push(file);
          const reader = new FileReader();
          reader.onload = (e) => {
            const preview = createElement(e, file);
            imagePreview.appendChild(preview);
          };
          reader.readAsDataURL(file);
        }
      });
    }

    function createElement(e, file) {
      const li = document.createElement('li');
      const img = document.createElement('img');
      img.setAttribute('src', e.target.result);
      img.setAttribute('data-file', file.name);
      li.appendChild(img);

      return li;
    }

    const realUpload = document.querySelector('.Resiter_img_input');
    const upload = document.querySelector('.Resiter_img_upload');

    upload.addEventListener('click', () => realUpload.click());

    realUpload.addEventListener('change', getImageFiles);
</script>

<script>
    function categoryChange(e) {
      var 대분류 = ["소분류"];
      var 소설 = ["국내소설", "외국소설", "무협지", "판타지"];
      var 문학 = ["에시이", "시", "인물/평전", "여행"];
      var 철학 = ["교육", "역사", "철학", "심리", "인문학"];
      var 자기계발 = ["성공", "인간관계", "비즈니스능력", "자기계발능력"];
      var 경영 = ["경영", "경제", "마케팅", "리더십"];
      var 만화 = ["공포", "판타지", "교양만화", "액션/무협/SF"];
      var 종교 = ["기독교", "종교일반", "종교학", "기타종교"];
      var 취미 = ["취미", "바둑", "홈공예", "레포츠"];
      var 잡지 = ["패션", "교양", "어학", "종교", "건축/예술"];
      var 역사 = ["한국사", "세계사", "한국문화", "고고학"];
      var 가정 = ["결혼", "다이어트", "출산", "육아"];
      var 사회 = ["사회", "법", "정치", "행정"];
      var 전문서적 = ["건축", "음악", "기술", "의학"];
      var 외국어 = ["일반영어", "일어", "중국어", "기타외국어"];
      var 외국도서 = ["해외잡지", "경영/경제", "종교", "자연과학"];
      var 유아 = ["유아전집", "그림책", "놀이학습", "한글동화"];
      var 아동 = ["영어동화", "한글동화", "학습만화", "문제집"];
      var 청소년 = ["공부방법", "청소년자기계발", "면접/논술", "학습지"];
      var 대학생 = ["경상계열", "인문계열", "법학계열", "공학계열"];
      var 취업 = ["공무원", "임용고시", "공인중개사", "편입"];
      var 영화음반 = ["CD", "DVD", "게임", "비디오"];
      var 사전 = ["백과사전", "전문사전", "어학사전", "기타전집류"];
      var 컴퓨터 = ["컴퓨터활용", "컴퓨터공학", "게임", "프로그래밍언어"];
      var 고서 = ["한국학", "잡지", "외국서적", "고전문학"];
      var 기타 = ["분류외"];
      var target = document.getElementById("good");

      if (e.value == "대분류") var d = 대분류;
      else if (e.value == "소설") var d = 소설;
      else if (e.value == "문학") var d = 문학;
      else if (e.value == "철학") var d = 철학;
      else if (e.value == "자기계발") var d = 자기계발;
      else if (e.value == "경영") var d = 경영;
      else if (e.value == "만화") var d = 만화;
      else if (e.value == "종교") var d = 종교;
      else if (e.value == "취미") var d = 취미;
      else if (e.value == "잡지") var d = 잡지;
      else if (e.value == "역사") var d = 역사;
      else if (e.value == "가정") var d = 가정;
      else if (e.value == "사회") var d = 사회;
      else if (e.value == "전문서적") var d = 전문서적;
      else if (e.value == "외국어") var d = 외국어;
      else if (e.value == "외국도서") var d = 외국도서;
      else if (e.value == "유아") var d = 유아;
      else if (e.value == "아동") var d = 아동;
      else if (e.value == "청소년") var d = 청소년;
      else if (e.value == "대학생") var d = 대학생;
      else if (e.value == "취업") var d = 취업;
      else if (e.value == "영화음반") var d = 영화음반;
      else if (e.value == "사전") var d = 사전;
      else if (e.value == "컴퓨터") var d = 컴퓨터;
      else if (e.value == "고서") var d = 고서;
      else if (e.value == "기타") var d = 기타;


      target.options.length = 0;

      for (x in d) {
        var opt = document.createElement("option");
        opt.value = d[x];
        opt.innerHTML = d[x];
        target.appendChild(opt);
      }
    }
</script>


</body>

</html>